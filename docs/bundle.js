(()=>{"use strict";var t={221:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});const o=s(e(858)),n=s(e(356)),h=s(e(408));i.default=class{constructor(){this.cellSize=20,this.cellsX=40,this.cellsY=40,this.width=this.cellsX*this.cellSize,this.height=this.cellsY*this.cellSize,this.isRunning=!0,this.frameCount=0,this.fps=20,this.fpsInterval=1e3/this.fps,this.apples=[],this.numApples=15,this.traps=[],this.numTraps=10,this.gameStatus="running",this.scale=1,this.setupDimensions(),this.setupButtons(),this.startGame()}startGame(){this.lastTime=window.performance.now(),this.startTime=this.lastTime,this.buildGradients(),this.buildSprites(),window.addEventListener("keydown",this.onKeyDown.bind(this),!1),window.requestAnimationFrame(this.runGameLoop.bind(this)),this.isRunning=!0}buildSprites(){this.setSnakePosition(),this.setApplePositions(),this.setTrapPositions()}setupDimensions(){if(this.canvas=document.createElement("Canvas"),this.context.lineWidth=2,document.body.append(this.canvas),this.cellsX*this.cellSize*this.scale+1>window.innerHeight){const t=window.innerHeight;this.cellSize=t/(this.scale*this.cellsY)-1,this.width=this.cellsX*this.cellSize,this.height=this.cellsY*this.cellSize}this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.width=this.width,this.canvas.height=this.height}setupButtons(){window.addEventListener("load",(()=>{this.startOverButton=document.createElement("button"),this.startOverButton.innerHTML="Start Over",this.startOverButton.addEventListener("click",this.onStartOverClick.bind(this)),this.toggleStartOverButton(!1),document.getElementById("controls").appendChild(this.startOverButton)}))}onStartOverClick(){this.apples=[],this.traps=[],this.player=null,this.buildSprites(),this.isRunning=!0,this.gameStatus="running",window.requestAnimationFrame(this.runGameLoop.bind(this))}toggleStartOverButton(t){this.startOverButton.style.opacity=t?"1":"0"}onKeyDown(t){switch(t.key){case"Escape":this.isRunning=!1;break;case"a":if("Right"==this.lastDirection)return;this.direction="Left";break;case"s":if("Up"==this.lastDirection)return;this.direction="Down";break;case"d":if("Left"==this.lastDirection)return;this.direction="Right";break;case"w":if("Down"==this.lastDirection)return;this.direction="Up"}this.lastDirection=this.direction}moveInDirection(){switch(this.direction){case"Up":this.movePlayer(0,-1);break;case"Down":this.movePlayer(0,1);break;case"Left":this.movePlayer(-1,0);break;case"Right":this.movePlayer(1,0)}}movePlayer(t,i){let{x:e,y:s}=this.player.positionWithOffset(t,i);e<0?e=this.cellsX-1:e>this.cellsX-1?e=0:s<0?s=this.cellsY-1:s>this.cellsY-1&&(s=0),this.checkState({x:e,y:s})&&this.player.moveTo(e,s)}runGameLoop(t){if(!this.isRunning)return void this.toggleStartOverButton(!0);this.animationFrameRequestId=window.requestAnimationFrame(this.runGameLoop.bind(this));const i=t,e=i-this.lastTime;if(e>this.fpsInterval){this.lastTime=i-e%this.fpsInterval;const t=i-this.startTime;this.moveInDirection(),this.paint(),this.drawFPS(t),this.showGameMessage()}}checkState(t){const{x:i,y:e}=t;if(this.playerIsCollidedWithTrap({x:i,y:e}))return this.lostGame(),!1;let s=this.playerIsCollidedWithApple({x:i,y:e});if(s){const t=this.apples.indexOf(s);return this.player.eat(s.block),this.apples=[...this.apples.slice(0,t),...this.apples.slice(t+1)],!1}return this.player.detectCollisionWithSelf(t)?(this.lostGame(),!1):0!=this.apples.length||(this.isRunning=!1,this.gameStatus="won",window.cancelAnimationFrame(this.animationFrameRequestId),!1)}lostGame(){this.isRunning=!1,this.gameStatus="lost",window.cancelAnimationFrame(this.animationFrameRequestId)}playerIsCollidedWithTrap(t){return this.traps.some((i=>i.detectCollisionAtPosition(t)))}playerIsCollidedWithApple(t){return this.apples.find((i=>i.detectCollisionAtPosition(t)))}get context(){return this.canvas.getContext("2d")}paint(){this.clearScreen(),this.drawGrid(0,0,this.width,this.height),this.drawSprite(this.player,"snakeGradient"),this.apples.forEach((t=>this.drawSprite(t,"appleGradient"))),this.traps.forEach((t=>this.drawSprite(t,"trapGradient")))}clearScreen(){this.context.fillStyle="white",this.context.clearRect(0,0,this.width,this.height)}buildGradients(){const t=this.context.createLinearGradient(0,0,this.width,this.height);t.addColorStop(0,"pink"),t.addColorStop(.5,"red"),t.addColorStop(1,"crimson");const i=this.context.createLinearGradient(0,0,this.width,this.height);i.addColorStop(0,"grey"),i.addColorStop(.5,"darkgrey"),i.addColorStop(1,"gainsboro");const e=this.context.createLinearGradient(0,0,this.width,this.height);e.addColorStop(0,"darkslategrey"),e.addColorStop(.5,"#333333"),e.addColorStop(1,"black"),this.gradients={appleGradient:t,trapGradient:i,snakeGradient:e}}drawSprite(t,i){t.blocks.forEach((t=>{this.drawBlock(t,i)}))}drawBlock(t,i){this.context.fillStyle=i?this.gradients[i]:t.color,this.context.fillRect(t.position.x*this.cellSize,t.position.y*this.cellSize,this.cellSize,this.cellSize)}drawGrid(t,i,e,s){this.context.strokeStyle="#CCCCCC";for(let t=0;t<=e;t+=this.cellSize)this.context.beginPath(),this.context.moveTo(t,i),this.context.lineTo(t,s),this.context.stroke();for(let i=0;i<=s;i+=this.cellSize)this.context.beginPath(),this.context.moveTo(t,i),this.context.lineTo(e,i),this.context.stroke()}showGameMessage(){switch(this.gameStatus){case"lost":this.drawTextAtMiddle("Try again");break;case"won":this.drawTextAtMiddle("You won!")}}drawFPS(t){const i=Math.round(1e3/(t/++this.frameCount)*100)/100;this.drawTextAtBottomRight(`FPS: ${i.toString()}`)}drawStrokeText(t,i,e){this.context.strokeStyle="white";const s=this.context.lineWidth;this.context.lineWidth=4,this.context.strokeText(t,i,e),this.context.fillStyle="black",this.context.fillText(t,i,e),this.context.lineWidth=s}drawTextAtMiddle(t){this.context.font="36px sans-serif";const i=this.context.measureText(t);this.drawStrokeText(t,this.width/2-i.width/2,this.height/2-i.actualBoundingBoxAscent/2)}drawTextAtBottomRight(t){this.context.font="12px sans-serif";const i=this.context.measureText(t);this.drawText(t,this.width-i.width-1,this.height-2)}drawText(t,i,e){this.context.fillStyle="black",this.context.fillText(t,i,e,this.width)}setSnakePosition(){const[t,i]=[Math.floor(this.cellsX/2),Math.floor(this.cellsY/2)];this.player=new o.default({x:t,y:i},6)}getRandomXY(){return{x:Math.floor(Math.random()*this.cellsX),y:Math.floor(Math.random()*this.cellsY)}}setApplePositions(){for(let t=0;t<this.numApples;t++){let t;for(;!t||t.detectCollisionWithSprite(this.player);){const{x:i,y:e}=this.getRandomXY();t=new n.default({x:i,y:e})}this.apples.push(t)}}setTrapPositions(){for(let t=0;t<this.numTraps;t++){let t;for(;!t||t.detectCollisionWithSprite(this.player)||this.apples.some((i=>i.detectCollisionWithSprite(t)));){const{x:i,y:e}=this.getRandomXY();t=new h.default({x:i,y:e})}this.traps.push(t)}}}},653:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SingularSprite=void 0;class e{constructor(t=[]){this.blocks=t,this.defaultColor="black"}get color(){return this.defaultColor}buildBlock(t,i,e=this.color){return{position:{x:t,y:i},color:e}}detectCollisionAtPosition(t){for(let i=0;i<this.blocks.length;i++)if(this.blocks[i].position.x==t.x&&this.blocks[i].position.y==t.y)return!0;return!1}detectCollisionWithSprite(t){for(let i=0;i<this.blocks.length;i++)for(let e=0;e<t.blocks.length;e++)if(this.blocks[i].position.x==t.blocks[e].position.x&&this.blocks[i].position.y==t.blocks[e].position.y)return!0;return!1}detectCollisionWithBlock(t){for(let i=0;i<this.blocks.length;i++)if(this.blocks[i].position.x==t.position.x&&this.blocks[i].position.y==t.position.y)return!0;return!1}}i.SingularSprite=class extends e{constructor(t){super(),this.blocks.push(this.buildBlock(t.x,t.y))}get block(){return this.blocks[0]}},i.default=e},607:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0}),(new(s(e(221)).default)).runGameLoop()},356:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(653);class o extends s.SingularSprite{get color(){return"red"}}i.default=o},858:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});const o=s(e(653));class n extends o.default{constructor(t,i){super();for(let e=0;e<i;e++){const i={x:t.x+e,y:t.y+e};this.blocks.push(this.buildBlock(i.x,i.y,this.color))}}eat(t){this.blocks.push({...t,color:this.color})}move(t,i){const e={x:this.headBlock.position.x+t,y:this.headBlock.position.y+i};this.blocks=[...this.blocks.slice(1),this.buildBlock(e.x,e.y,this.color)]}moveTo(t,i){this.blocks=[...this.blocks.slice(1),this.buildBlock(t,i,this.color)]}detectCollisionWithSelf(t){return this.blocks.slice(1).some((i=>i.position.x==t.x&&i.position.y==t.y))}positionWithOffset(t,i){return{x:this.headBlock.position.x+t,y:this.headBlock.position.y+i}}get headBlock(){return this.blocks[this.blocks.length-1]}}i.default=n},408:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(653);class o extends s.SingularSprite{get color(){return"#666666"}}i.default=o}},i={};!function e(s){if(i[s])return i[s].exports;var o=i[s]={exports:{}};return t[s].call(o.exports,o,o.exports,e),o.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbmFrZS10eXBlc2NyaXB0Ly4vc3JjL0dhbWUudHMiLCJ3ZWJwYWNrOi8vc25ha2UtdHlwZXNjcmlwdC8uL3NyYy9TcHJpdGUudHMiLCJ3ZWJwYWNrOi8vc25ha2UtdHlwZXNjcmlwdC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9zbmFrZS10eXBlc2NyaXB0Ly4vc3JjL3Nwcml0ZXMvQXBwbGUudHMiLCJ3ZWJwYWNrOi8vc25ha2UtdHlwZXNjcmlwdC8uL3NyYy9zcHJpdGVzL1BsYXllci50cyIsIndlYnBhY2s6Ly9zbmFrZS10eXBlc2NyaXB0Ly4vc3JjL3Nwcml0ZXMvVHJhcC50cyIsIndlYnBhY2s6Ly9zbmFrZS10eXBlc2NyaXB0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NuYWtlLXR5cGVzY3JpcHQvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbImNlbGxTaXplIiwiY2VsbHNYIiwiY2VsbHNZIiwid2lkdGgiLCJ0aGlzIiwiaGVpZ2h0IiwiaXNSdW5uaW5nIiwiZnJhbWVDb3VudCIsImZwcyIsImZwc0ludGVydmFsIiwiYXBwbGVzIiwibnVtQXBwbGVzIiwidHJhcHMiLCJudW1UcmFwcyIsImdhbWVTdGF0dXMiLCJzY2FsZSIsInNldHVwRGltZW5zaW9ucyIsInNldHVwQnV0dG9ucyIsInN0YXJ0R2FtZSIsImxhc3RUaW1lIiwid2luZG93IiwicGVyZm9ybWFuY2UiLCJub3ciLCJzdGFydFRpbWUiLCJidWlsZEdyYWRpZW50cyIsImJ1aWxkU3ByaXRlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbktleURvd24iLCJiaW5kIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicnVuR2FtZUxvb3AiLCJzZXRTbmFrZVBvc2l0aW9uIiwic2V0QXBwbGVQb3NpdGlvbnMiLCJzZXRUcmFwUG9zaXRpb25zIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY29udGV4dCIsImxpbmVXaWR0aCIsImJvZHkiLCJhcHBlbmQiLCJpbm5lckhlaWdodCIsInN0eWxlIiwic3RhcnRPdmVyQnV0dG9uIiwiaW5uZXJIVE1MIiwib25TdGFydE92ZXJDbGljayIsInRvZ2dsZVN0YXJ0T3ZlckJ1dHRvbiIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJwbGF5ZXIiLCJzaG93Iiwib3BhY2l0eSIsImV2dCIsImtleSIsImxhc3REaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJtb3ZlUGxheWVyIiwieE9mZnNldCIsInlPZmZzZXQiLCJ4IiwieSIsInBvc2l0aW9uV2l0aE9mZnNldCIsImNoZWNrU3RhdGUiLCJtb3ZlVG8iLCJuZXdUaW1lIiwiYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQiLCJ0aW1lRWxhcHNlZCIsInRpbWVTaW5jZVN0YXJ0IiwibW92ZUluRGlyZWN0aW9uIiwicGFpbnQiLCJkcmF3RlBTIiwic2hvd0dhbWVNZXNzYWdlIiwicG9zaXRpb24iLCJwbGF5ZXJJc0NvbGxpZGVkV2l0aFRyYXAiLCJsb3N0R2FtZSIsImNvbGxpZGVkQXBwbGUiLCJwbGF5ZXJJc0NvbGxpZGVkV2l0aEFwcGxlIiwiaWR4IiwiaW5kZXhPZiIsImVhdCIsImJsb2NrIiwic2xpY2UiLCJkZXRlY3RDb2xsaXNpb25XaXRoU2VsZiIsImxlbmd0aCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwic29tZSIsInRyYXAiLCJkZXRlY3RDb2xsaXNpb25BdFBvc2l0aW9uIiwiZmluZCIsImFwcGxlIiwiZ2V0Q29udGV4dCIsImNsZWFyU2NyZWVuIiwiZHJhd0dyaWQiLCJkcmF3U3ByaXRlIiwiZm9yRWFjaCIsImZpbGxTdHlsZSIsImNsZWFyUmVjdCIsImFwcGxlR3JhZGllbnQiLCJjcmVhdGVMaW5lYXJHcmFkaWVudCIsImFkZENvbG9yU3RvcCIsInRyYXBHcmFkaWVudCIsInNuYWtlR3JhZGllbnQiLCJncmFkaWVudHMiLCJzcHJpdGUiLCJncmFkaWVudFN0eWxlIiwiYmxvY2tzIiwiZHJhd0Jsb2NrIiwiY29sb3IiLCJmaWxsUmVjdCIsInN0cm9rZVN0eWxlIiwiYmVnaW5QYXRoIiwibGluZVRvIiwic3Ryb2tlIiwiZHJhd1RleHRBdE1pZGRsZSIsImN1cnJlbnRGcHMiLCJNYXRoIiwicm91bmQiLCJkcmF3VGV4dEF0Qm90dG9tUmlnaHQiLCJ0b1N0cmluZyIsInRleHQiLCJwcmV2TGluZVdpZHRoIiwic3Ryb2tlVGV4dCIsImZpbGxUZXh0IiwiZm9udCIsInRleHRNZXRyaWNzIiwibWVhc3VyZVRleHQiLCJkcmF3U3Ryb2tlVGV4dCIsImFjdHVhbEJvdW5kaW5nQm94QXNjZW50IiwiZHJhd1RleHQiLCJtaWRkbGVYIiwibWlkZGxlWSIsImZsb29yIiwicmFuZG9tIiwiaSIsImRldGVjdENvbGxpc2lvbldpdGhTcHJpdGUiLCJnZXRSYW5kb21YWSIsInB1c2giLCJTcHJpdGUiLCJkZWZhdWx0Q29sb3IiLCJqIiwic3VwZXIiLCJidWlsZEJsb2NrIiwiQXBwbGUiLCJTaW5ndWxhclNwcml0ZSIsIlBsYXllciIsInN0YXJ0UG9zaXRpb24iLCJudW1CbG9ja3MiLCJuZXdQb3NpdGlvbiIsImhlYWRCbG9jayIsIlRyYXAiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwibWFwcGluZ3MiOiJtTEFBQSxrQkFDQSxZQUNBLFlBeWFBLFVBcGFBLE1BMEJFLGNBeEJRLEtBQUFBLFNBQVcsR0FDWCxLQUFBQyxPQUFTLEdBQ1QsS0FBQUMsT0FBUyxHQUNULEtBQUFDLE1BQVFDLEtBQUtILE9BQVNHLEtBQUtKLFNBQzNCLEtBQUFLLE9BQVNELEtBQUtGLE9BQVNFLEtBQUtKLFNBQzVCLEtBQUFNLFdBQVksRUFJWixLQUFBQyxXQUFhLEVBRWIsS0FBQUMsSUFBTSxHQUNOLEtBQUFDLFlBQWMsSUFBT0wsS0FBS0ksSUFDMUIsS0FBQUUsT0FBa0IsR0FDbEIsS0FBQUMsVUFBWSxHQUNaLEtBQUFDLE1BQWdC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SixVQUFVNUUsU0FBU2IsRUFBSUYsRUFDL0JHLEVBQUd4RCxLQUFLZ0osVUFBVTVFLFNBQVNaLEVBQUlGLEdBSW5DLGdCQUNFLE9BQU90RCxLQUFLcUcsT0FBT3JHLEtBQUtxRyxPQUFPdEIsT0FBUyxJQUk1QyxVQUFlNkQsRywrREN6RGYsZUFFQSxNQUFNSyxVQUFhLEVBQUFOLGVBQ2pCLFlBQ0UsTUFBTyxXQUlYLFVBQWVNLElDUFhDLEVBQTJCLElBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixHQUFHRixFQUF5QkUsR0FDM0IsT0FBT0YsRUFBeUJFLEdBQVVDLFFBRzNDLElBQUlDLEVBQVNKLEVBQXlCRSxHQUFZLENBR2pEQyxRQUFTLElBT1YsT0FIQUUsRUFBb0JILEdBQVVJLEtBQUtGLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBR3BFRyxFQUFPRCxRQ2pCZkYsQ0FBb0IsTSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGxheWVyIGZyb20gXCIuL3Nwcml0ZXMvUGxheWVyXCI7XG5pbXBvcnQgQXBwbGUgZnJvbSBcIi4vc3ByaXRlcy9BcHBsZVwiO1xuaW1wb3J0IFRyYXAgZnJvbSBcIi4vc3ByaXRlcy9UcmFwXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuL1Nwcml0ZVwiO1xuaW1wb3J0IHsgUG9zaXRpb24sIEJsb2NrIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxudHlwZSBEaXJlY3Rpb24gPSBcIlVwXCIgfCBcIkRvd25cIiB8IFwiUmlnaHRcIiB8IFwiTGVmdFwiXG5jbGFzcyBHYW1lIHtcbiAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIGNlbGxTaXplID0gMjA7XG4gIHByaXZhdGUgY2VsbHNYID0gNDA7XG4gIHByaXZhdGUgY2VsbHNZID0gNDA7XG4gIHByaXZhdGUgd2lkdGggPSB0aGlzLmNlbGxzWCAqIHRoaXMuY2VsbFNpemU7XG4gIHByaXZhdGUgaGVpZ2h0ID0gdGhpcy5jZWxsc1kgKiB0aGlzLmNlbGxTaXplO1xuICBwcml2YXRlIGlzUnVubmluZyA9IHRydWU7XG4gIHByaXZhdGUgcGxheWVyOiBQbGF5ZXI7XG4gIHByaXZhdGUgbGFzdFRpbWU6IG51bWJlcjtcbiAgcHJpdmF0ZSBzdGFydFRpbWU6IG51bWJlcjtcbiAgcHJpdmF0ZSBmcmFtZUNvdW50ID0gMDtcbiAgcHJpdmF0ZSBkaXJlY3Rpb246IERpcmVjdGlvbjtcbiAgcHJpdmF0ZSBmcHMgPSAyMDtcbiAgcHJpdmF0ZSBmcHNJbnRlcnZhbCA9IDEwMDAgLyB0aGlzLmZwcztcbiAgcHJpdmF0ZSBhcHBsZXM6IEFwcGxlW10gPSBbXTtcbiAgcHJpdmF0ZSBudW1BcHBsZXMgPSAxNTtcbiAgcHJpdmF0ZSB0cmFwczogVHJhcFtdID0gW107XG4gIHByaXZhdGUgbnVtVHJhcHMgPSAxMDtcbiAgcHJpdmF0ZSBnYW1lU3RhdHVzID0gXCJydW5uaW5nXCI7XG4gIHByaXZhdGUgYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBzY2FsZSA9IDE7XG4gIHByaXZhdGUgc3RhcnRPdmVyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBncmFkaWVudHM6IHsgW2tleTogc3RyaW5nXTogQ2FudmFzR3JhZGllbnQgfTtcbiAgcHJpdmF0ZSBsYXN0RGlyZWN0aW9uOiBEaXJlY3Rpb25cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNldHVwRGltZW5zaW9ucygpO1xuXG4gICAgdGhpcy5zZXR1cEJ1dHRvbnMoKTtcbiAgICB0aGlzLnN0YXJ0R2FtZSgpO1xuICB9XG5cbiAgc3RhcnRHYW1lKCkge1xuICAgIHRoaXMubGFzdFRpbWUgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgdGhpcy5zdGFydFRpbWUgPSB0aGlzLmxhc3RUaW1lO1xuXG4gICAgdGhpcy5idWlsZEdyYWRpZW50cygpO1xuICAgIHRoaXMuYnVpbGRTcHJpdGVzKCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5vbktleURvd24uYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5ydW5HYW1lTG9vcC5iaW5kKHRoaXMpKTtcblxuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgfVxuXG4gIGJ1aWxkU3ByaXRlcygpIHtcbiAgICB0aGlzLnNldFNuYWtlUG9zaXRpb24oKTtcbiAgICB0aGlzLnNldEFwcGxlUG9zaXRpb25zKCk7XG4gICAgdGhpcy5zZXRUcmFwUG9zaXRpb25zKCk7XG4gIH1cblxuICBzZXR1cERpbWVuc2lvbnMoKSB7XG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHRoaXMuY29udGV4dC5saW5lV2lkdGggPSAyO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMuY2FudmFzKTtcblxuICAgIGlmICh0aGlzLmNlbGxzWCAqIHRoaXMuY2VsbFNpemUgKiB0aGlzLnNjYWxlICsgMSA+IHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgICAgY29uc3QgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgdGhpcy5jZWxsU2l6ZSA9IGhlaWdodCAvICh0aGlzLnNjYWxlICogdGhpcy5jZWxsc1kpIC0gMTtcbiAgICAgIHRoaXMud2lkdGggPSB0aGlzLmNlbGxzWCAqIHRoaXMuY2VsbFNpemU7XG4gICAgICB0aGlzLmhlaWdodCA9IHRoaXMuY2VsbHNZICogdGhpcy5jZWxsU2l6ZTtcbiAgICB9XG5cbiAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyBcInB4XCI7XG4gICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyBcInB4XCI7XG5cbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gIH1cblxuICBzZXR1cEJ1dHRvbnMoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RhcnRPdmVyQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHRoaXMuc3RhcnRPdmVyQnV0dG9uLmlubmVySFRNTCA9IFwiU3RhcnQgT3ZlclwiO1xuICAgICAgdGhpcy5zdGFydE92ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICB0aGlzLm9uU3RhcnRPdmVyQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICk7XG4gICAgICB0aGlzLnRvZ2dsZVN0YXJ0T3ZlckJ1dHRvbihmYWxzZSk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRyb2xzXCIpLmFwcGVuZENoaWxkKHRoaXMuc3RhcnRPdmVyQnV0dG9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uU3RhcnRPdmVyQ2xpY2soKSB7XG4gICAgdGhpcy5hcHBsZXMgPSBbXTtcbiAgICB0aGlzLnRyYXBzID0gW107XG4gICAgdGhpcy5wbGF5ZXIgPSBudWxsO1xuXG4gICAgdGhpcy5idWlsZFNwcml0ZXMoKTtcbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgdGhpcy5nYW1lU3RhdHVzID0gXCJydW5uaW5nXCI7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJ1bkdhbWVMb29wLmJpbmQodGhpcykpO1xuICB9XG5cbiAgdG9nZ2xlU3RhcnRPdmVyQnV0dG9uKHNob3c6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0YXJ0T3ZlckJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gc2hvdyA/IFwiMVwiIDogXCIwXCI7XG4gIH1cblxuICBvbktleURvd24oZXZ0OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgc3dpdGNoIChldnQua2V5KSB7XG4gICAgICBjYXNlIFwiRXNjYXBlXCI6XG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImFcIjpcbiAgICAgICAgaWYgKHRoaXMubGFzdERpcmVjdGlvbiA9PSBcIlJpZ2h0XCIpIHJldHVyblxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFwiTGVmdFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgIGlmICh0aGlzLmxhc3REaXJlY3Rpb24gPT0gXCJVcFwiKSByZXR1cm5cbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBcIkRvd25cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZFwiOlxuICAgICAgICBpZiAodGhpcy5sYXN0RGlyZWN0aW9uID09IFwiTGVmdFwiKSByZXR1cm5cbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBcIlJpZ2h0XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIndcIjpcbiAgICAgICAgaWYgKHRoaXMubGFzdERpcmVjdGlvbiA9PSBcIkRvd25cIikgcmV0dXJuXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gXCJVcFwiO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICB0aGlzLmxhc3REaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvblxuICB9XG5cbiAgbW92ZUluRGlyZWN0aW9uKCkge1xuICAgIHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgXCJVcFwiOlxuICAgICAgICB0aGlzLm1vdmVQbGF5ZXIoMCwgLTEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJEb3duXCI6XG4gICAgICAgIHRoaXMubW92ZVBsYXllcigwLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTGVmdFwiOlxuICAgICAgICB0aGlzLm1vdmVQbGF5ZXIoLTEsIDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJSaWdodFwiOlxuICAgICAgICB0aGlzLm1vdmVQbGF5ZXIoMSwgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIG1vdmVQbGF5ZXIoeE9mZnNldDogbnVtYmVyLCB5T2Zmc2V0OiBudW1iZXIpIHtcbiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzLnBsYXllci5wb3NpdGlvbldpdGhPZmZzZXQoeE9mZnNldCwgeU9mZnNldCk7XG5cbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHggPSB0aGlzLmNlbGxzWCAtIDE7XG4gICAgfSBlbHNlIGlmICh4ID4gdGhpcy5jZWxsc1ggLSAxKSB7XG4gICAgICB4ID0gMDtcbiAgICB9IGVsc2UgaWYgKHkgPCAwKSB7XG4gICAgICB5ID0gdGhpcy5jZWxsc1kgLSAxO1xuICAgIH0gZWxzZSBpZiAoeSA+IHRoaXMuY2VsbHNZIC0gMSkge1xuICAgICAgeSA9IDA7XG4gICAgfVxuICAgIGlmICghdGhpcy5jaGVja1N0YXRlKHsgeDogeCwgeTogeSB9KSkgcmV0dXJuO1xuXG4gICAgdGhpcy5wbGF5ZXIubW92ZVRvKHgsIHkpO1xuICB9XG5cbiAgcnVuR2FtZUxvb3AobmV3VGltZT86IG51bWJlcikge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHRoaXMudG9nZ2xlU3RhcnRPdmVyQnV0dG9uKHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKFxuICAgICAgdGhpcy5ydW5HYW1lTG9vcC5iaW5kKHRoaXMpLFxuICAgICk7XG5cbiAgICBjb25zdCBub3cgPSBuZXdUaW1lO1xuICAgIGNvbnN0IHRpbWVFbGFwc2VkID0gbm93IC0gdGhpcy5sYXN0VGltZTtcblxuICAgIGlmICh0aW1lRWxhcHNlZCA+IHRoaXMuZnBzSW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMubGFzdFRpbWUgPSBub3cgLSAodGltZUVsYXBzZWQgJSB0aGlzLmZwc0ludGVydmFsKTtcbiAgICAgIGNvbnN0IHRpbWVTaW5jZVN0YXJ0ID0gbm93IC0gdGhpcy5zdGFydFRpbWU7XG5cbiAgICAgIHRoaXMubW92ZUluRGlyZWN0aW9uKCk7XG4gICAgICB0aGlzLnBhaW50KCk7XG4gICAgICB0aGlzLmRyYXdGUFModGltZVNpbmNlU3RhcnQpO1xuICAgICAgdGhpcy5zaG93R2FtZU1lc3NhZ2UoKTtcbiAgICB9XG4gIH1cblxuICBjaGVja1N0YXRlKHBvc2l0aW9uOiBQb3NpdGlvbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gcG9zaXRpb247XG5cbiAgICBpZiAodGhpcy5wbGF5ZXJJc0NvbGxpZGVkV2l0aFRyYXAoeyB4LCB5IH0pKSB7XG4gICAgICB0aGlzLmxvc3RHYW1lKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGNvbGxpZGVkQXBwbGUgPSB0aGlzLnBsYXllcklzQ29sbGlkZWRXaXRoQXBwbGUoeyB4LCB5IH0pO1xuICAgIGlmIChjb2xsaWRlZEFwcGxlKSB7XG4gICAgICBjb25zdCBpZHggPSB0aGlzLmFwcGxlcy5pbmRleE9mKGNvbGxpZGVkQXBwbGUpO1xuICAgICAgdGhpcy5wbGF5ZXIuZWF0KGNvbGxpZGVkQXBwbGUuYmxvY2spO1xuICAgICAgdGhpcy5hcHBsZXMgPSBbXG4gICAgICAgIC4uLnRoaXMuYXBwbGVzLnNsaWNlKDAsIGlkeCksXG4gICAgICAgIC4uLnRoaXMuYXBwbGVzLnNsaWNlKGlkeCArIDEpLFxuICAgICAgXTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xsaWRlZFdpdGhTZWxmID0gdGhpcy5wbGF5ZXIuZGV0ZWN0Q29sbGlzaW9uV2l0aFNlbGYocG9zaXRpb24pO1xuICAgIGlmIChjb2xsaWRlZFdpdGhTZWxmKSB7XG4gICAgICB0aGlzLmxvc3RHYW1lKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXBwbGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5nYW1lU3RhdHVzID0gXCJ3b25cIjtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkZyYW1lUmVxdWVzdElkKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGxvc3RHYW1lKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgdGhpcy5nYW1lU3RhdHVzID0gXCJsb3N0XCI7XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQpO1xuICB9XG5cbiAgcGxheWVySXNDb2xsaWRlZFdpdGhUcmFwKHBvc2l0aW9uOiBQb3NpdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRyYXBzLnNvbWUoKHRyYXApID0+IHtcbiAgICAgIHJldHVybiB0cmFwLmRldGVjdENvbGxpc2lvbkF0UG9zaXRpb24ocG9zaXRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgcGxheWVySXNDb2xsaWRlZFdpdGhBcHBsZShwb3NpdGlvbjogUG9zaXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5hcHBsZXMuZmluZCgoYXBwbGUpID0+IHtcbiAgICAgIHJldHVybiBhcHBsZS5kZXRlY3RDb2xsaXNpb25BdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldCBjb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgfVxuXG4gIHBhaW50KCkge1xuICAgIHRoaXMuY2xlYXJTY3JlZW4oKTtcbiAgICB0aGlzLmRyYXdHcmlkKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB0aGlzLmRyYXdTcHJpdGUodGhpcy5wbGF5ZXIsIFwic25ha2VHcmFkaWVudFwiKTtcbiAgICB0aGlzLmFwcGxlcy5mb3JFYWNoKChhcHBsZSkgPT4gdGhpcy5kcmF3U3ByaXRlKGFwcGxlLCBcImFwcGxlR3JhZGllbnRcIikpO1xuICAgIHRoaXMudHJhcHMuZm9yRWFjaCgodHJhcCkgPT4gdGhpcy5kcmF3U3ByaXRlKHRyYXAsIFwidHJhcEdyYWRpZW50XCIpKTtcbiAgfVxuXG4gIGNsZWFyU2NyZWVuKCkge1xuICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XG4gICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gIH1cblxuICBidWlsZEdyYWRpZW50cygpIHtcbiAgICBjb25zdCBhcHBsZUdyYWRpZW50ID0gdGhpcy5jb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICB0aGlzLndpZHRoLFxuICAgICAgdGhpcy5oZWlnaHQsXG4gICAgKTtcblxuICAgIGFwcGxlR3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIFwicGlua1wiKTtcbiAgICBhcHBsZUdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsIFwicmVkXCIpO1xuICAgIGFwcGxlR3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiY3JpbXNvblwiKTtcblxuICAgIGNvbnN0IHRyYXBHcmFkaWVudCA9IHRoaXMuY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudChcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgdGhpcy53aWR0aCxcbiAgICAgIHRoaXMuaGVpZ2h0LFxuICAgICk7XG5cbiAgICB0cmFwR3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIFwiZ3JleVwiKTtcbiAgICB0cmFwR3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNSwgXCJkYXJrZ3JleVwiKTtcbiAgICB0cmFwR3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiZ2FpbnNib3JvXCIpO1xuXG4gICAgY29uc3Qgc25ha2VHcmFkaWVudCA9IHRoaXMuY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudChcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgdGhpcy53aWR0aCxcbiAgICAgIHRoaXMuaGVpZ2h0LFxuICAgICk7XG5cbiAgICBzbmFrZUdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcImRhcmtzbGF0ZWdyZXlcIik7XG4gICAgc25ha2VHcmFkaWVudC5hZGRDb2xvclN0b3AoMC41LCBcIiMzMzMzMzNcIik7XG4gICAgc25ha2VHcmFkaWVudC5hZGRDb2xvclN0b3AoMSwgXCJibGFja1wiKTtcblxuICAgIHRoaXMuZ3JhZGllbnRzID0geyBhcHBsZUdyYWRpZW50LCB0cmFwR3JhZGllbnQsIHNuYWtlR3JhZGllbnQgfTtcbiAgfVxuXG4gIGRyYXdTcHJpdGUoc3ByaXRlOiBTcHJpdGUsIGdyYWRpZW50U3R5bGU/OiBzdHJpbmcpIHtcbiAgICBzcHJpdGUuYmxvY2tzLmZvckVhY2goKGJsb2NrKSA9PiB7XG4gICAgICB0aGlzLmRyYXdCbG9jayhibG9jaywgZ3JhZGllbnRTdHlsZSk7XG4gICAgfSk7XG4gIH1cblxuICBkcmF3QmxvY2soYmxvY2s6IEJsb2NrLCBncmFkaWVudFN0eWxlPzogc3RyaW5nKSB7XG4gICAgaWYgKGdyYWRpZW50U3R5bGUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLmdyYWRpZW50c1tncmFkaWVudFN0eWxlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IGJsb2NrLmNvbG9yO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoXG4gICAgICBibG9jay5wb3NpdGlvbi54ICogdGhpcy5jZWxsU2l6ZSxcbiAgICAgIGJsb2NrLnBvc2l0aW9uLnkgKiB0aGlzLmNlbGxTaXplLFxuICAgICAgdGhpcy5jZWxsU2l6ZSxcbiAgICAgIHRoaXMuY2VsbFNpemUsXG4gICAgKTtcbiAgfVxuXG4gIGRyYXdHcmlkKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IFwiI0NDQ0NDQ1wiO1xuICAgIGZvciAobGV0IHggPSAwOyB4IDw9IHdpZHRoOyB4ICs9IHRoaXMuY2VsbFNpemUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8oeCwgeSk7XG4gICAgICB0aGlzLmNvbnRleHQubGluZVRvKHgsIGhlaWdodCk7XG4gICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPD0gaGVpZ2h0OyB5ICs9IHRoaXMuY2VsbFNpemUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8oeCwgeSk7XG4gICAgICB0aGlzLmNvbnRleHQubGluZVRvKHdpZHRoLCB5KTtcbiAgICAgIHRoaXMuY29udGV4dC5zdHJva2UoKTtcbiAgICB9XG4gIH1cblxuICBzaG93R2FtZU1lc3NhZ2UoKSB7XG4gICAgc3dpdGNoICh0aGlzLmdhbWVTdGF0dXMpIHtcbiAgICAgIGNhc2UgXCJsb3N0XCI6XG4gICAgICAgIHRoaXMuZHJhd1RleHRBdE1pZGRsZShcIlRyeSBhZ2FpblwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwid29uXCI6XG4gICAgICAgIHRoaXMuZHJhd1RleHRBdE1pZGRsZShcIllvdSB3b24hXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBkcmF3RlBTKHRpbWVTaW5jZVN0YXJ0OiBudW1iZXIpIHtcbiAgICBjb25zdCBjdXJyZW50RnBzID1cbiAgICAgIE1hdGgucm91bmQoKDEwMDAgLyAodGltZVNpbmNlU3RhcnQgLyArK3RoaXMuZnJhbWVDb3VudCkpICogMTAwKSAvIDEwMDtcbiAgICB0aGlzLmRyYXdUZXh0QXRCb3R0b21SaWdodChgRlBTOiAke2N1cnJlbnRGcHMudG9TdHJpbmcoKX1gKTtcbiAgfVxuXG4gIGRyYXdTdHJva2VUZXh0KHRleHQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIndoaXRlXCI7XG4gICAgY29uc3QgcHJldkxpbmVXaWR0aCA9IHRoaXMuY29udGV4dC5saW5lV2lkdGg7XG4gICAgdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IDQ7XG4gICAgdGhpcy5jb250ZXh0LnN0cm9rZVRleHQodGV4dCwgeCwgeSk7XG4gICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcbiAgICB0aGlzLmNvbnRleHQuZmlsbFRleHQodGV4dCwgeCwgeSk7XG4gICAgdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IHByZXZMaW5lV2lkdGg7XG4gIH1cblxuICBkcmF3VGV4dEF0TWlkZGxlKHRleHQ6IHN0cmluZykge1xuICAgIHRoaXMuY29udGV4dC5mb250ID0gXCIzNnB4IHNhbnMtc2VyaWZcIjtcblxuICAgIGNvbnN0IHRleHRNZXRyaWNzID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpO1xuICAgIHRoaXMuZHJhd1N0cm9rZVRleHQoXG4gICAgICB0ZXh0LFxuICAgICAgdGhpcy53aWR0aCAvIDIgLSB0ZXh0TWV0cmljcy53aWR0aCAvIDIsXG4gICAgICB0aGlzLmhlaWdodCAvIDIgLSB0ZXh0TWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCAvIDIsXG4gICAgKTtcbiAgfVxuXG4gIGRyYXdUZXh0QXRCb3R0b21SaWdodCh0ZXh0OiBzdHJpbmcpIHtcbiAgICB0aGlzLmNvbnRleHQuZm9udCA9IFwiMTJweCBzYW5zLXNlcmlmXCI7XG5cbiAgICBjb25zdCB0ZXh0TWV0cmljcyA9IHRoaXMuY29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KTtcbiAgICB0aGlzLmRyYXdUZXh0KHRleHQsIHRoaXMud2lkdGggLSB0ZXh0TWV0cmljcy53aWR0aCAtIDEsIHRoaXMuaGVpZ2h0IC0gMik7XG4gIH1cblxuICBkcmF3VGV4dCh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcblxuICAgIHRoaXMuY29udGV4dC5maWxsVGV4dCh0ZXh0LCB4LCB5LCB0aGlzLndpZHRoKTtcbiAgfVxuXG4gIHNldFNuYWtlUG9zaXRpb24oKSB7XG4gICAgY29uc3QgW21pZGRsZVgsIG1pZGRsZVldID0gW1xuICAgICAgTWF0aC5mbG9vcih0aGlzLmNlbGxzWCAvIDIpLFxuICAgICAgTWF0aC5mbG9vcih0aGlzLmNlbGxzWSAvIDIpLFxuICAgIF07XG4gICAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKHsgeDogbWlkZGxlWCwgeTogbWlkZGxlWSB9LCA2KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UmFuZG9tWFkoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuY2VsbHNYKSxcbiAgICAgIHk6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuY2VsbHNZKSxcbiAgICB9O1xuICB9XG5cbiAgc2V0QXBwbGVQb3NpdGlvbnMoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bUFwcGxlczsgaSsrKSB7XG4gICAgICBsZXQgYXBwbGU6IEFwcGxlO1xuICAgICAgd2hpbGUgKCFhcHBsZSB8fCBhcHBsZS5kZXRlY3RDb2xsaXNpb25XaXRoU3ByaXRlKHRoaXMucGxheWVyKSkge1xuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuZ2V0UmFuZG9tWFkoKTtcbiAgICAgICAgYXBwbGUgPSBuZXcgQXBwbGUoeyB4LCB5IH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5hcHBsZXMucHVzaChhcHBsZSk7XG4gICAgfVxuICB9XG5cbiAgc2V0VHJhcFBvc2l0aW9ucygpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVHJhcHM7IGkrKykge1xuICAgICAgbGV0IHRyYXA6IFRyYXA7XG4gICAgICB3aGlsZSAoXG4gICAgICAgICF0cmFwIHx8XG4gICAgICAgIHRyYXAuZGV0ZWN0Q29sbGlzaW9uV2l0aFNwcml0ZSh0aGlzLnBsYXllcikgfHxcbiAgICAgICAgdGhpcy5hcHBsZXMuc29tZSgoYXBwbGUpID0+IGFwcGxlLmRldGVjdENvbGxpc2lvbldpdGhTcHJpdGUodHJhcCkpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmdldFJhbmRvbVhZKCk7XG4gICAgICAgIHRyYXAgPSBuZXcgVHJhcCh7IHgsIHkgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnRyYXBzLnB1c2godHJhcCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWU7XG4iLCJpbXBvcnQgeyBCbG9jaywgUG9zaXRpb24gfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5jbGFzcyBTcHJpdGUge1xuICBkZWZhdWx0Q29sb3IgPSBcImJsYWNrXCJcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgYmxvY2tzOiBCbG9ja1tdID0gW11cbiAgKSB7fVxuXG4gIGdldCBjb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29sb3JcbiAgfVxuXG4gIGJ1aWxkQmxvY2soXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICBjb2xvcjogc3RyaW5nID0gdGhpcy5jb2xvclxuICApOiBCbG9jayB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvc2l0aW9uOiB7IHgsIHkgfSxcbiAgICAgIGNvbG9yOiBjb2xvclxuICAgIH07XG4gIH1cblxuICBkZXRlY3RDb2xsaXNpb25BdFBvc2l0aW9uKHBvc2l0aW9uOiBQb3NpdGlvbik6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ibG9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5ibG9ja3NbaV0ucG9zaXRpb24ueCA9PSBwb3NpdGlvbi54ICYmXG4gICAgICAgIHRoaXMuYmxvY2tzW2ldLnBvc2l0aW9uLnkgPT0gcG9zaXRpb24ueVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBkZXRlY3RDb2xsaXNpb25XaXRoU3ByaXRlKHNwcml0ZTogU3ByaXRlKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJsb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzcHJpdGUuYmxvY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmJsb2Nrc1tpXS5wb3NpdGlvbi54ID09IHNwcml0ZS5ibG9ja3Nbal0ucG9zaXRpb24ueCAmJlxuICAgICAgICAgIHRoaXMuYmxvY2tzW2ldLnBvc2l0aW9uLnkgPT0gc3ByaXRlLmJsb2Nrc1tqXS5wb3NpdGlvbi55XG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGRldGVjdENvbGxpc2lvbldpdGhCbG9jayhibG9jazogQmxvY2spOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuYmxvY2tzW2ldLnBvc2l0aW9uLnggPT0gYmxvY2sucG9zaXRpb24ueCAmJlxuICAgICAgICB0aGlzLmJsb2Nrc1tpXS5wb3NpdGlvbi55ID09IGJsb2NrLnBvc2l0aW9uLnlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTaW5ndWxhclNwcml0ZSBleHRlbmRzIFNwcml0ZSB7XG4gIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBQb3NpdGlvbikge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLmJsb2Nrcy5wdXNoKFxuICAgICAgdGhpcy5idWlsZEJsb2NrKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpXG4gICAgKTtcbiAgfVxuXG4gIGdldCBibG9jaygpIHtcbiAgICByZXR1cm4gdGhpcy5ibG9ja3NbMF07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3ByaXRlO1xuIiwiaW1wb3J0IEdhbWUgZnJvbSAnLi9HYW1lJ1xuXG5cbmNvbnN0IGdhbWUgPSBuZXcgR2FtZSgpXG5nYW1lLnJ1bkdhbWVMb29wKCkiLCJpbXBvcnQgeyBTaW5ndWxhclNwcml0ZSB9IGZyb20gJy4uL1Nwcml0ZSdcblxuY2xhc3MgQXBwbGUgZXh0ZW5kcyBTaW5ndWxhclNwcml0ZSB7XG4gIGdldCBjb2xvcigpIHtcbiAgICByZXR1cm4gXCJyZWRcIlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcGxlIiwiaW1wb3J0IHsgQmxvY2ssIFBvc2l0aW9uIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuLi9TcHJpdGVcIjtcblxuY2xhc3MgUGxheWVyIGV4dGVuZHMgU3ByaXRlIHtcbiAgY29uc3RydWN0b3Ioc3RhcnRQb3NpdGlvbjogUG9zaXRpb24sIG51bUJsb2NrczogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUJsb2NrczsgaSsrKSB7XG4gICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IHtcbiAgICAgICAgeDogc3RhcnRQb3NpdGlvbi54ICsgaSxcbiAgICAgICAgeTogc3RhcnRQb3NpdGlvbi55ICsgaSxcbiAgICAgIH07XG4gICAgICB0aGlzLmJsb2Nrcy5wdXNoKFxuICAgICAgICB0aGlzLmJ1aWxkQmxvY2sobmV3UG9zaXRpb24ueCwgbmV3UG9zaXRpb24ueSwgdGhpcy5jb2xvciksXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGVhdChibG9jazogQmxvY2spIHtcbiAgICB0aGlzLmJsb2Nrcy5wdXNoKHtcbiAgICAgIC4uLmJsb2NrLFxuICAgICAgY29sb3I6IHRoaXMuY29sb3IsXG4gICAgfSk7XG4gIH1cblxuICBtb3ZlKHhPZmZzZXQ6IG51bWJlciwgeU9mZnNldDogbnVtYmVyKSB7XG4gICAgY29uc3QgbmV3UG9zaXRpb24gPSB7XG4gICAgICB4OiB0aGlzLmhlYWRCbG9jay5wb3NpdGlvbi54ICsgeE9mZnNldCxcbiAgICAgIHk6IHRoaXMuaGVhZEJsb2NrLnBvc2l0aW9uLnkgKyB5T2Zmc2V0LFxuICAgIH07XG4gICAgdGhpcy5ibG9ja3MgPSBbXG4gICAgICAuLi50aGlzLmJsb2Nrcy5zbGljZSgxKSxcbiAgICAgIHRoaXMuYnVpbGRCbG9jayhuZXdQb3NpdGlvbi54LCBuZXdQb3NpdGlvbi55LCB0aGlzLmNvbG9yKSxcbiAgICBdO1xuICB9XG5cbiAgbW92ZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5ibG9ja3MgPSBbLi4udGhpcy5ibG9ja3Muc2xpY2UoMSksIHRoaXMuYnVpbGRCbG9jayh4LCB5LCB0aGlzLmNvbG9yKV07XG4gIH1cblxuICBkZXRlY3RDb2xsaXNpb25XaXRoU2VsZihwb3NpdGlvbjogUG9zaXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5ibG9ja3Muc2xpY2UoMSkuc29tZSgoYmxvY2spID0+IHtcbiAgICAgIHJldHVybiBibG9jay5wb3NpdGlvbi54ID09IHBvc2l0aW9uLnggJiYgYmxvY2sucG9zaXRpb24ueSA9PSBwb3NpdGlvbi55O1xuICAgIH0pO1xuICB9XG5cbiAgcG9zaXRpb25XaXRoT2Zmc2V0KHhPZmZzZXQ6IG51bWJlciwgeU9mZnNldDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHRoaXMuaGVhZEJsb2NrLnBvc2l0aW9uLnggKyB4T2Zmc2V0LFxuICAgICAgeTogdGhpcy5oZWFkQmxvY2sucG9zaXRpb24ueSArIHlPZmZzZXQsXG4gICAgfTtcbiAgfVxuXG4gIGdldCBoZWFkQmxvY2soKTogQmxvY2sge1xuICAgIHJldHVybiB0aGlzLmJsb2Nrc1t0aGlzLmJsb2Nrcy5sZW5ndGggLSAxXTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7XG4iLCJpbXBvcnQgeyBTaW5ndWxhclNwcml0ZSB9IGZyb20gJy4uL1Nwcml0ZSdcblxuY2xhc3MgVHJhcCBleHRlbmRzIFNpbmd1bGFyU3ByaXRlIHtcbiAgZ2V0IGNvbG9yKCkge1xuICAgIHJldHVybiBcIiM2NjY2NjZcIlxuICB9IFxufVxuXG5leHBvcnQgZGVmYXVsdCBUcmFwIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=