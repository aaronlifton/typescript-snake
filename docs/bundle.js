(()=>{"use strict";var t={221:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});const o=s(e(858)),n=s(e(356)),h=s(e(408));i.default=class{constructor(){this.cellSize=20,this.cellsX=40,this.cellsY=40,this.width=this.cellsX*this.cellSize,this.height=this.cellsY*this.cellSize,this.isRunning=!0,this.frameCount=0,this.fps=20,this.fpsInterval=1e3/this.fps,this.apples=[],this.numApples=10,this.traps=[],this.numTraps=5,this.gameStatus="running",this.scale=1,this.setupDimensions(),this.setupButtons(),this.startGame()}startGame(){this.lastTime=window.performance.now(),this.startTime=this.lastTime,this.buildGradients(),this.buildSprites(),window.addEventListener("keydown",this.onKeyDown.bind(this),!1),window.requestAnimationFrame(this.runGameLoop.bind(this)),this.isRunning=!0}buildSprites(){this.setSnakePosition(),this.setApplePositions(),this.setTrapPositions()}setupDimensions(){if(this.canvas=document.createElement("Canvas"),this.context.lineWidth=2,document.body.append(this.canvas),this.cellsX*this.cellSize*this.scale+1>window.innerHeight){const t=window.innerHeight;this.cellSize=t/(this.scale*this.cellsY)-1,this.width=this.cellsX*this.cellSize,this.height=this.cellsY*this.cellSize}this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.width=this.width,this.canvas.height=this.height}setupButtons(){window.addEventListener("load",(()=>{this.startOverButton=document.createElement("button"),this.startOverButton.innerHTML="Start Over",this.startOverButton.addEventListener("click",this.onStartOverClick.bind(this)),this.toggleStartOverButton(!1),document.getElementById("controls").appendChild(this.startOverButton)}))}onStartOverClick(){this.apples=[],this.traps=[],this.player=null,this.buildSprites(),this.isRunning=!0,this.gameStatus="running",window.requestAnimationFrame(this.runGameLoop.bind(this))}toggleStartOverButton(t){this.startOverButton.style.opacity=t?"1":"0"}onKeyDown(t){switch(t.key){case"Escape":this.isRunning=!1;break;case"a":this.direction="Left";break;case"s":this.direction="Down";break;case"d":this.direction="Right";break;case"w":this.direction="Up"}}moveInDirection(){switch(this.direction){case"Up":this.movePlayer(0,-1);break;case"Down":this.movePlayer(0,1);break;case"Left":this.movePlayer(-1,0);break;case"Right":this.movePlayer(1,0)}}movePlayer(t,i){let{x:e,y:s}=this.player.positionWithOffset(t,i);e<0?e=this.cellsX-1:e>this.cellsX-1?e=0:s<0?s=this.cellsY-1:s>this.cellsY-1&&(s=0),this.checkState({x:e,y:s})&&this.player.moveTo(e,s)}runGameLoop(t){if(!this.isRunning)return void this.toggleStartOverButton(!0);this.animationFrameRequestId=window.requestAnimationFrame(this.runGameLoop.bind(this));const i=t,e=i-this.lastTime;if(e>this.fpsInterval){this.lastTime=i-e%this.fpsInterval;const t=i-this.startTime;this.moveInDirection(),this.paint(),this.drawFPS(t),this.showGameMessage()}}checkState(t){const{x:i,y:e}=t;if(this.playerIsCollidedWithTrap({x:i,y:e}))return this.lostGame(),!1;let s=this.playerIsCollidedWithApple({x:i,y:e});if(s){const t=this.apples.indexOf(s);return this.player.eat(s.block),this.apples=[...this.apples.slice(0,t),...this.apples.slice(t+1)],!1}return this.player.detectCollisionWithSelf(t)?(this.lostGame(),!1):0!=this.apples.length||(this.isRunning=!1,this.gameStatus="won",window.cancelAnimationFrame(this.animationFrameRequestId),!1)}lostGame(){this.isRunning=!1,this.gameStatus="lost",window.cancelAnimationFrame(this.animationFrameRequestId)}playerIsCollidedWithTrap(t){return this.traps.some((i=>i.detectCollisionAtPosition(t)))}playerIsCollidedWithApple(t){return this.apples.find((i=>i.detectCollisionAtPosition(t)))}get context(){return this.canvas.getContext("2d")}paint(){this.clearScreen(),this.drawGrid(0,0,this.width,this.height),this.drawSprite(this.player,"snakeGradient"),this.apples.forEach((t=>this.drawSprite(t,"appleGradient"))),this.traps.forEach((t=>this.drawSprite(t,"trapGradient")))}clearScreen(){this.context.fillStyle="white",this.context.clearRect(0,0,this.width,this.height)}buildGradients(){const t=this.context.createLinearGradient(0,0,this.width,this.height);t.addColorStop(0,"pink"),t.addColorStop(.5,"red"),t.addColorStop(1,"crimson");const i=this.context.createLinearGradient(0,0,this.width,this.height);i.addColorStop(0,"grey"),i.addColorStop(.5,"darkgrey"),i.addColorStop(1,"gainsboro");const e=this.context.createLinearGradient(0,0,this.width,this.height);e.addColorStop(0,"darkslategrey"),e.addColorStop(.5,"#333333"),e.addColorStop(1,"black"),this.gradients={appleGradient:t,trapGradient:i,snakeGradient:e}}drawSprite(t,i){t.blocks.forEach((t=>{this.drawBlock(t,i)}))}drawBlock(t,i){this.context.fillStyle=i?this.gradients[i]:t.color,this.context.fillRect(t.position.x*this.cellSize,t.position.y*this.cellSize,this.cellSize,this.cellSize)}drawGrid(t,i,e,s){this.context.strokeStyle="#CCCCCC";for(let t=0;t<=e;t+=this.cellSize)this.context.beginPath(),this.context.moveTo(t,i),this.context.lineTo(t,s),this.context.stroke();for(let i=0;i<=s;i+=this.cellSize)this.context.beginPath(),this.context.moveTo(t,i),this.context.lineTo(e,i),this.context.stroke()}showGameMessage(){switch(this.gameStatus){case"lost":this.drawTextAtMiddle("Try again");break;case"won":this.drawTextAtMiddle("You won!")}}drawFPS(t){const i=Math.round(1e3/(t/++this.frameCount)*100)/100;this.drawTextAtBottomRight(`FPS: ${i.toString()}`)}drawStrokeText(t,i,e){this.context.strokeStyle="white";const s=this.context.lineWidth;this.context.lineWidth=4,this.context.strokeText(t,i,e),this.context.fillStyle="black",this.context.fillText(t,i,e),this.context.lineWidth=s}drawTextAtMiddle(t){this.context.font="36px sans-serif";const i=this.context.measureText(t);this.drawStrokeText(t,this.width/2-i.width/2,this.height/2-i.actualBoundingBoxAscent/2)}drawTextAtBottomRight(t){this.context.font="12px sans-serif";const i=this.context.measureText(t);this.drawText(t,this.width-i.width-1,this.height-2)}drawText(t,i,e){this.context.fillStyle="black",this.context.fillText(t,i,e,this.width)}setSnakePosition(){const[t,i]=[Math.floor(this.cellsX/2),Math.floor(this.cellsY/2)];this.player=new o.default({x:t,y:i},6)}getRandomXY(){return{x:Math.floor(Math.random()*this.cellsX),y:Math.floor(Math.random()*this.cellsY)}}setApplePositions(){for(let t=0;t<this.numApples;t++){let t;for(;!t||t.detectCollisionWithSprite(this.player);){const{x:i,y:e}=this.getRandomXY();t=new n.default({x:i,y:e})}this.apples.push(t)}}setTrapPositions(){for(let t=0;t<this.numTraps;t++){let t;for(;!t||t.detectCollisionWithSprite(this.player)||this.apples.some((i=>i.detectCollisionWithSprite(t)));){const{x:i,y:e}=this.getRandomXY();t=new h.default({x:i,y:e})}this.traps.push(t)}}}},653:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SingularSprite=void 0;class e{constructor(t=[]){this.blocks=t,this.defaultColor="black"}get color(){return this.defaultColor}buildBlock(t,i,e=this.color){return{position:{x:t,y:i},color:e}}detectCollisionAtPosition(t){for(let i=0;i<this.blocks.length;i++)if(this.blocks[i].position.x==t.x&&this.blocks[i].position.y==t.y)return!0;return!1}detectCollisionWithSprite(t){for(let i=0;i<this.blocks.length;i++)for(let e=0;e<t.blocks.length;e++)if(this.blocks[i].position.x==t.blocks[e].position.x&&this.blocks[i].position.y==t.blocks[e].position.y)return!0;return!1}detectCollisionWithBlock(t){for(let i=0;i<this.blocks.length;i++)if(this.blocks[i].position.x==t.position.x&&this.blocks[i].position.y==t.position.y)return!0;return!1}}i.SingularSprite=class extends e{constructor(t){super(),this.blocks.push(this.buildBlock(t.x,t.y))}get block(){return this.blocks[0]}},i.default=e},607:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0}),(new(s(e(221)).default)).runGameLoop()},356:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(653);class o extends s.SingularSprite{get color(){return"red"}}i.default=o},858:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});const o=s(e(653));class n extends o.default{constructor(t,i){super();for(let e=0;e<i;e++){const i={x:t.x+e,y:t.y+e};this.blocks.push(this.buildBlock(i.x,i.y,this.color))}}eat(t){this.blocks.push({...t,color:this.color})}move(t,i){const e={x:this.headBlock.position.x+t,y:this.headBlock.position.y+i};this.blocks=[...this.blocks.slice(1),this.buildBlock(e.x,e.y,this.color)]}moveTo(t,i){this.blocks=[...this.blocks.slice(1),this.buildBlock(t,i,this.color)]}detectCollisionWithSelf(t){return this.blocks.slice(1).some((i=>i.position.x==t.x&&i.position.y==t.y))}positionWithOffset(t,i){return{x:this.headBlock.position.x+t,y:this.headBlock.position.y+i}}get headBlock(){return this.blocks[this.blocks.length-1]}}i.default=n},408:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(653);class o extends s.SingularSprite{get color(){return"#666666"}}i.default=o}},i={};!function e(s){if(i[s])return i[s].exports;var o=i[s]={exports:{}};return t[s].call(o.exports,o,o.exports,e),o.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbmFrZS10eXBlc2NyaXB0Ly4vc3JjL0dhbWUudHMiLCJ3ZWJwYWNrOi8vc25ha2UtdHlwZXNjcmlwdC8uL3NyYy9TcHJpdGUudHMiLCJ3ZWJwYWNrOi8vc25ha2UtdHlwZXNjcmlwdC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9zbmFrZS10eXBlc2NyaXB0Ly4vc3JjL3Nwcml0ZXMvQXBwbGUudHMiLCJ3ZWJwYWNrOi8vc25ha2UtdHlwZXNjcmlwdC8uL3NyYy9zcHJpdGVzL1BsYXllci50cyIsIndlYnBhY2s6Ly9zbmFrZS10eXBlc2NyaXB0Ly4vc3JjL3Nwcml0ZXMvVHJhcC50cyIsIndlYnBhY2s6Ly9zbmFrZS10eXBlc2NyaXB0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NuYWtlLXR5cGVzY3JpcHQvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbImNlbGxTaXplIiwiY2VsbHNYIiwiY2VsbHNZIiwid2lkdGgiLCJ0aGlzIiwiaGVpZ2h0IiwiaXNSdW5uaW5nIiwiZnJhbWVDb3VudCIsImZwcyIsImZwc0ludGVydmFsIiwiYXBwbGVzIiwibnVtQXBwbGVzIiwidHJhcHMiLCJudW1UcmFwcyIsImdhbWVTdGF0dXMiLCJzY2FsZSIsInNldHVwRGltZW5zaW9ucyIsInNldHVwQnV0dG9ucyIsInN0YXJ0R2FtZSIsImxhc3RUaW1lIiwid2luZG93IiwicGVyZm9ybWFuY2UiLCJub3ciLCJzdGFydFRpbWUiLCJidWlsZEdyYWRpZW50cyIsImJ1aWxkU3ByaXRlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbktleURvd24iLCJiaW5kIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicnVuR2FtZUxvb3AiLCJzZXRTbmFrZVBvc2l0aW9uIiwic2V0QXBwbGVQb3NpdGlvbnMiLCJzZXRUcmFwUG9zaXRpb25zIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY29udGV4dCIsImxpbmVXaWR0aCIsImJvZHkiLCJhcHBlbmQiLCJpbm5lckhlaWdodCIsInN0eWxlIiwic3RhcnRPdmVyQnV0dG9uIiwiaW5uZXJIVE1MIiwib25TdGFydE92ZXJDbGljayIsInRvZ2dsZVN0YXJ0T3ZlckJ1dHRvbiIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJwbGF5ZXIiLCJzaG93Iiwib3BhY2l0eSIsImV2dCIsImtleSIsImRpcmVjdGlvbiIsIm1vdmVQbGF5ZXIiLCJ4T2Zmc2V0IiwieU9mZnNldCIsIngiLCJ5IiwicG9zaXRpb25XaXRoT2Zmc2V0IiwiY2hlY2tTdGF0ZSIsIm1vdmVUbyIsIm5ld1RpbWUiLCJhbmltYXRpb25GcmFtZVJlcXVlc3RJZCIsInRpbWVFbGFwc2VkIiwidGltZVNpbmNlU3RhcnQiLCJtb3ZlSW5EaXJlY3Rpb24iLCJwYWludCIsImRyYXdGUFMiLCJzaG93R2FtZU1lc3NhZ2UiLCJwb3NpdGlvbiIsInBsYXllcklzQ29sbGlkZWRXaXRoVHJhcCIsImxvc3RHYW1lIiwiY29sbGlkZWRBcHBsZSIsInBsYXllcklzQ29sbGlkZWRXaXRoQXBwbGUiLCJpZHgiLCJpbmRleE9mIiwiZWF0IiwiYmxvY2siLCJzbGljZSIsImRldGVjdENvbGxpc2lvbldpdGhTZWxmIiwibGVuZ3RoIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJzb21lIiwidHJhcCIsImRldGVjdENvbGxpc2lvbkF0UG9zaXRpb24iLCJmaW5kIiwiYXBwbGUiLCJnZXRDb250ZXh0IiwiY2xlYXJTY3JlZW4iLCJkcmF3R3JpZCIsImRyYXdTcHJpdGUiLCJmb3JFYWNoIiwiZmlsbFN0eWxlIiwiY2xlYXJSZWN0IiwiYXBwbGVHcmFkaWVudCIsImNyZWF0ZUxpbmVhckdyYWRpZW50IiwiYWRkQ29sb3JTdG9wIiwidHJhcEdyYWRpZW50Iiwic25ha2VHcmFkaWVudCIsImdyYWRpZW50cyIsInNwcml0ZSIsImdyYWRpZW50U3R5bGUiLCJibG9ja3MiLCJkcmF3QmxvY2siLCJjb2xvciIsImZpbGxSZWN0Iiwic3Ryb2tlU3R5bGUiLCJiZWdpblBhdGgiLCJsaW5lVG8iLCJzdHJva2UiLCJkcmF3VGV4dEF0TWlkZGxlIiwiY3VycmVudEZwcyIsIk1hdGgiLCJyb3VuZCIsImRyYXdUZXh0QXRCb3R0b21SaWdodCIsInRvU3RyaW5nIiwidGV4dCIsInByZXZMaW5lV2lkdGgiLCJzdHJva2VUZXh0IiwiZmlsbFRleHQiLCJmb250IiwidGV4dE1ldHJpY3MiLCJtZWFzdXJlVGV4dCIsImRyYXdTdHJva2VUZXh0IiwiYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQiLCJkcmF3VGV4dCIsIm1pZGRsZVgiLCJtaWRkbGVZIiwiZmxvb3IiLCJyYW5kb20iLCJpIiwiZGV0ZWN0Q29sbGlzaW9uV2l0aFNwcml0ZSIsImdldFJhbmRvbVhZIiwicHVzaCIsIlNwcml0ZSIsImRlZmF1bHRDb2xvciIsImoiLCJzdXBlciIsImJ1aWxkQmxvY2siLCJBcHBsZSIsIlNpbmd1bGFyU3ByaXRlIiwiUGxheWVyIiwic3RhcnRQb3NpdGlvbiIsIm51bUJsb2NrcyIsIm5ld1Bvc2l0aW9uIiwiaGVhZEJsb2NrIiwiVHJhcCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJtYXBwaW5ncyI6Im1MQUFBLGtCQUNBLFlBQ0EsWUFnYUEsVUE3WkEsTUF5QkUsY0F2QlEsS0FBQUEsU0FBVyxHQUNYLEtBQUFDLE9BQVMsR0FDVCxLQUFBQyxPQUFTLEdBQ1QsS0FBQUMsTUFBUUMsS0FBS0gsT0FBU0csS0FBS0osU0FDM0IsS0FBQUssT0FBU0QsS0FBS0YsT0FBU0UsS0FBS0osU0FDNUIsS0FBQU0sV0FBWSxFQUlaLEtBQUFDLFdBQWEsRUFFYixLQUFBQyxJQUFNLEdBQ04sS0FBQUMsWUFBYyxJQUFPTCxLQUFLSSxJQUMxQixLQUFBRSxPQUFrQixHQUNsQixLQUFBQyxVQUFZLEdBQ1osS0FBQUMsTUFBZ0IsR0FDaEIsS0FBQUMsU0FB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VUFBZU0sSUNQWEMsRUFBMkIsSUFHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLEdBQUdGLEVBQXlCRSxHQUMzQixPQUFPRixFQUF5QkUsR0FBVUMsUUFHM0MsSUFBSUMsRUFBU0osRUFBeUJFLEdBQVksQ0FHakRDLFFBQVMsSUFPVixPQUhBRSxFQUFvQkgsR0FBVUksS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHcEVHLEVBQU9ELFFDakJmRixDQUFvQixNIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vc3ByaXRlcy9QbGF5ZXJcIjtcbmltcG9ydCBBcHBsZSBmcm9tIFwiLi9zcHJpdGVzL0FwcGxlXCI7XG5pbXBvcnQgVHJhcCBmcm9tIFwiLi9zcHJpdGVzL1RyYXBcIjtcbmltcG9ydCBTcHJpdGUgZnJvbSBcIi4vU3ByaXRlXCI7XG5pbXBvcnQgeyBQb3NpdGlvbiwgQmxvY2sgfSBmcm9tIFwiLi90eXBlc1wiO1xuY2xhc3MgR2FtZSB7XG4gIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJpdmF0ZSBjZWxsU2l6ZSA9IDIwO1xuICBwcml2YXRlIGNlbGxzWCA9IDQwO1xuICBwcml2YXRlIGNlbGxzWSA9IDQwO1xuICBwcml2YXRlIHdpZHRoID0gdGhpcy5jZWxsc1ggKiB0aGlzLmNlbGxTaXplO1xuICBwcml2YXRlIGhlaWdodCA9IHRoaXMuY2VsbHNZICogdGhpcy5jZWxsU2l6ZTtcbiAgcHJpdmF0ZSBpc1J1bm5pbmcgPSB0cnVlO1xuICBwcml2YXRlIHBsYXllcjogUGxheWVyO1xuICBwcml2YXRlIGxhc3RUaW1lOiBudW1iZXI7XG4gIHByaXZhdGUgc3RhcnRUaW1lOiBudW1iZXI7XG4gIHByaXZhdGUgZnJhbWVDb3VudCA9IDA7XG4gIHByaXZhdGUgZGlyZWN0aW9uOiBcIlVwXCIgfCBcIkRvd25cIiB8IFwiUmlnaHRcIiB8IFwiTGVmdFwiO1xuICBwcml2YXRlIGZwcyA9IDIwO1xuICBwcml2YXRlIGZwc0ludGVydmFsID0gMTAwMCAvIHRoaXMuZnBzO1xuICBwcml2YXRlIGFwcGxlczogQXBwbGVbXSA9IFtdO1xuICBwcml2YXRlIG51bUFwcGxlcyA9IDEwO1xuICBwcml2YXRlIHRyYXBzOiBUcmFwW10gPSBbXTtcbiAgcHJpdmF0ZSBudW1UcmFwcyA9IDU7XG4gIHByaXZhdGUgZ2FtZVN0YXR1cyA9IFwicnVubmluZ1wiO1xuICBwcml2YXRlIGFuaW1hdGlvbkZyYW1lUmVxdWVzdElkOiBudW1iZXI7XG4gIHByaXZhdGUgc2NhbGUgPSAxO1xuICBwcml2YXRlIHN0YXJ0T3ZlckJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgZ3JhZGllbnRzOiB7IFtrZXk6IHN0cmluZ106IENhbnZhc0dyYWRpZW50IH07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZXR1cERpbWVuc2lvbnMoKTtcblxuICAgIHRoaXMuc2V0dXBCdXR0b25zKCk7XG4gICAgdGhpcy5zdGFydEdhbWUoKTtcbiAgfVxuXG4gIHN0YXJ0R2FtZSgpIHtcbiAgICB0aGlzLmxhc3RUaW1lID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHRoaXMuc3RhcnRUaW1lID0gdGhpcy5sYXN0VGltZTtcblxuICAgIHRoaXMuYnVpbGRHcmFkaWVudHMoKTtcbiAgICB0aGlzLmJ1aWxkU3ByaXRlcygpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMub25LZXlEb3duLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucnVuR2FtZUxvb3AuYmluZCh0aGlzKSk7XG5cbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gIH1cblxuICBidWlsZFNwcml0ZXMoKSB7XG4gICAgdGhpcy5zZXRTbmFrZVBvc2l0aW9uKCk7XG4gICAgdGhpcy5zZXRBcHBsZVBvc2l0aW9ucygpO1xuICAgIHRoaXMuc2V0VHJhcFBvc2l0aW9ucygpO1xuICB9XG5cbiAgc2V0dXBEaW1lbnNpb25zKCkge1xuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICB0aGlzLmNvbnRleHQubGluZVdpZHRoID0gMjtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0aGlzLmNhbnZhcyk7XG5cbiAgICBpZiAodGhpcy5jZWxsc1ggKiB0aGlzLmNlbGxTaXplICogdGhpcy5zY2FsZSArIDEgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgIHRoaXMuY2VsbFNpemUgPSBoZWlnaHQgLyAodGhpcy5zY2FsZSAqIHRoaXMuY2VsbHNZKSAtIDE7XG4gICAgICB0aGlzLndpZHRoID0gdGhpcy5jZWxsc1ggKiB0aGlzLmNlbGxTaXplO1xuICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmNlbGxzWSAqIHRoaXMuY2VsbFNpemU7XG4gICAgfVxuXG4gICAgdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgXCJweFwiO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgXCJweFwiO1xuXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICB9XG5cbiAgc2V0dXBCdXR0b25zKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXJ0T3ZlckJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICB0aGlzLnN0YXJ0T3ZlckJ1dHRvbi5pbm5lckhUTUwgPSBcIlN0YXJ0IE92ZXJcIjtcbiAgICAgIHRoaXMuc3RhcnRPdmVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgdGhpcy5vblN0YXJ0T3ZlckNsaWNrLmJpbmQodGhpcyksXG4gICAgICApO1xuICAgICAgdGhpcy50b2dnbGVTdGFydE92ZXJCdXR0b24oZmFsc2UpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250cm9sc1wiKS5hcHBlbmRDaGlsZCh0aGlzLnN0YXJ0T3ZlckJ1dHRvbik7XG4gICAgfSk7XG4gIH1cblxuICBvblN0YXJ0T3ZlckNsaWNrKCkge1xuICAgIHRoaXMuYXBwbGVzID0gW107XG4gICAgdGhpcy50cmFwcyA9IFtdO1xuICAgIHRoaXMucGxheWVyID0gbnVsbDtcblxuICAgIHRoaXMuYnVpbGRTcHJpdGVzKCk7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xuICAgIHRoaXMuZ2FtZVN0YXR1cyA9IFwicnVubmluZ1wiO1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5ydW5HYW1lTG9vcC5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHRvZ2dsZVN0YXJ0T3ZlckJ1dHRvbihzaG93OiBib29sZWFuKSB7XG4gICAgdGhpcy5zdGFydE92ZXJCdXR0b24uc3R5bGUub3BhY2l0eSA9IHNob3cgPyBcIjFcIiA6IFwiMFwiO1xuICB9XG5cbiAgb25LZXlEb3duKGV2dDogS2V5Ym9hcmRFdmVudCkge1xuICAgIHN3aXRjaCAoZXZ0LmtleSkge1xuICAgICAgY2FzZSBcIkVzY2FwZVwiOlxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gXCJMZWZ0XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBcIkRvd25cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZFwiOlxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFwiUmlnaHRcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwid1wiOlxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFwiVXBcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgbW92ZUluRGlyZWN0aW9uKCkge1xuICAgIHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgXCJVcFwiOlxuICAgICAgICB0aGlzLm1vdmVQbGF5ZXIoMCwgLTEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJEb3duXCI6XG4gICAgICAgIHRoaXMubW92ZVBsYXllcigwLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTGVmdFwiOlxuICAgICAgICB0aGlzLm1vdmVQbGF5ZXIoLTEsIDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJSaWdodFwiOlxuICAgICAgICB0aGlzLm1vdmVQbGF5ZXIoMSwgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIG1vdmVQbGF5ZXIoeE9mZnNldDogbnVtYmVyLCB5T2Zmc2V0OiBudW1iZXIpIHtcbiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzLnBsYXllci5wb3NpdGlvbldpdGhPZmZzZXQoeE9mZnNldCwgeU9mZnNldCk7XG5cbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHggPSB0aGlzLmNlbGxzWCAtIDE7XG4gICAgfSBlbHNlIGlmICh4ID4gdGhpcy5jZWxsc1ggLSAxKSB7XG4gICAgICB4ID0gMDtcbiAgICB9IGVsc2UgaWYgKHkgPCAwKSB7XG4gICAgICB5ID0gdGhpcy5jZWxsc1kgLSAxO1xuICAgIH0gZWxzZSBpZiAoeSA+IHRoaXMuY2VsbHNZIC0gMSkge1xuICAgICAgeSA9IDA7XG4gICAgfVxuICAgIGlmICghdGhpcy5jaGVja1N0YXRlKHsgeDogeCwgeTogeSB9KSkgcmV0dXJuO1xuXG4gICAgdGhpcy5wbGF5ZXIubW92ZVRvKHgsIHkpO1xuICB9XG5cbiAgcnVuR2FtZUxvb3AobmV3VGltZT86IG51bWJlcikge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHRoaXMudG9nZ2xlU3RhcnRPdmVyQnV0dG9uKHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKFxuICAgICAgdGhpcy5ydW5HYW1lTG9vcC5iaW5kKHRoaXMpLFxuICAgICk7XG5cbiAgICBjb25zdCBub3cgPSBuZXdUaW1lO1xuICAgIGNvbnN0IHRpbWVFbGFwc2VkID0gbm93IC0gdGhpcy5sYXN0VGltZTtcblxuICAgIGlmICh0aW1lRWxhcHNlZCA+IHRoaXMuZnBzSW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMubGFzdFRpbWUgPSBub3cgLSAodGltZUVsYXBzZWQgJSB0aGlzLmZwc0ludGVydmFsKTtcbiAgICAgIGNvbnN0IHRpbWVTaW5jZVN0YXJ0ID0gbm93IC0gdGhpcy5zdGFydFRpbWU7XG5cbiAgICAgIHRoaXMubW92ZUluRGlyZWN0aW9uKCk7XG4gICAgICB0aGlzLnBhaW50KCk7XG4gICAgICB0aGlzLmRyYXdGUFModGltZVNpbmNlU3RhcnQpO1xuICAgICAgdGhpcy5zaG93R2FtZU1lc3NhZ2UoKTtcbiAgICB9XG4gIH1cblxuICBjaGVja1N0YXRlKHBvc2l0aW9uOiBQb3NpdGlvbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gcG9zaXRpb247XG5cbiAgICBpZiAodGhpcy5wbGF5ZXJJc0NvbGxpZGVkV2l0aFRyYXAoeyB4LCB5IH0pKSB7XG4gICAgICB0aGlzLmxvc3RHYW1lKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGNvbGxpZGVkQXBwbGUgPSB0aGlzLnBsYXllcklzQ29sbGlkZWRXaXRoQXBwbGUoeyB4LCB5IH0pO1xuICAgIGlmIChjb2xsaWRlZEFwcGxlKSB7XG4gICAgICBjb25zdCBpZHggPSB0aGlzLmFwcGxlcy5pbmRleE9mKGNvbGxpZGVkQXBwbGUpO1xuICAgICAgdGhpcy5wbGF5ZXIuZWF0KGNvbGxpZGVkQXBwbGUuYmxvY2spO1xuICAgICAgdGhpcy5hcHBsZXMgPSBbXG4gICAgICAgIC4uLnRoaXMuYXBwbGVzLnNsaWNlKDAsIGlkeCksXG4gICAgICAgIC4uLnRoaXMuYXBwbGVzLnNsaWNlKGlkeCArIDEpLFxuICAgICAgXTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xsaWRlZFdpdGhTZWxmID0gdGhpcy5wbGF5ZXIuZGV0ZWN0Q29sbGlzaW9uV2l0aFNlbGYocG9zaXRpb24pO1xuICAgIGlmIChjb2xsaWRlZFdpdGhTZWxmKSB7XG4gICAgICB0aGlzLmxvc3RHYW1lKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXBwbGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5nYW1lU3RhdHVzID0gXCJ3b25cIjtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkZyYW1lUmVxdWVzdElkKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGxvc3RHYW1lKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgdGhpcy5nYW1lU3RhdHVzID0gXCJsb3N0XCI7XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVSZXF1ZXN0SWQpO1xuICB9XG5cbiAgcGxheWVySXNDb2xsaWRlZFdpdGhUcmFwKHBvc2l0aW9uOiBQb3NpdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRyYXBzLnNvbWUoKHRyYXApID0+IHtcbiAgICAgIHJldHVybiB0cmFwLmRldGVjdENvbGxpc2lvbkF0UG9zaXRpb24ocG9zaXRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgcGxheWVySXNDb2xsaWRlZFdpdGhBcHBsZShwb3NpdGlvbjogUG9zaXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5hcHBsZXMuZmluZCgoYXBwbGUpID0+IHtcbiAgICAgIHJldHVybiBhcHBsZS5kZXRlY3RDb2xsaXNpb25BdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldCBjb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgfVxuXG4gIHBhaW50KCkge1xuICAgIHRoaXMuY2xlYXJTY3JlZW4oKTtcbiAgICB0aGlzLmRyYXdHcmlkKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB0aGlzLmRyYXdTcHJpdGUodGhpcy5wbGF5ZXIsIFwic25ha2VHcmFkaWVudFwiKTtcbiAgICB0aGlzLmFwcGxlcy5mb3JFYWNoKChhcHBsZSkgPT4gdGhpcy5kcmF3U3ByaXRlKGFwcGxlLCBcImFwcGxlR3JhZGllbnRcIikpO1xuICAgIHRoaXMudHJhcHMuZm9yRWFjaCgodHJhcCkgPT4gdGhpcy5kcmF3U3ByaXRlKHRyYXAsIFwidHJhcEdyYWRpZW50XCIpKTtcbiAgfVxuXG4gIGNsZWFyU2NyZWVuKCkge1xuICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XG4gICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gIH1cblxuICBidWlsZEdyYWRpZW50cygpIHtcbiAgICBjb25zdCBhcHBsZUdyYWRpZW50ID0gdGhpcy5jb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICB0aGlzLndpZHRoLFxuICAgICAgdGhpcy5oZWlnaHQsXG4gICAgKTtcblxuICAgIGFwcGxlR3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIFwicGlua1wiKTtcbiAgICBhcHBsZUdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsIFwicmVkXCIpO1xuICAgIGFwcGxlR3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiY3JpbXNvblwiKTtcblxuICAgIGNvbnN0IHRyYXBHcmFkaWVudCA9IHRoaXMuY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudChcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgdGhpcy53aWR0aCxcbiAgICAgIHRoaXMuaGVpZ2h0LFxuICAgICk7XG5cbiAgICB0cmFwR3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIFwiZ3JleVwiKTtcbiAgICB0cmFwR3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNSwgXCJkYXJrZ3JleVwiKTtcbiAgICB0cmFwR3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiZ2FpbnNib3JvXCIpO1xuXG4gICAgY29uc3Qgc25ha2VHcmFkaWVudCA9IHRoaXMuY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudChcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgdGhpcy53aWR0aCxcbiAgICAgIHRoaXMuaGVpZ2h0LFxuICAgICk7XG5cbiAgICBzbmFrZUdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcImRhcmtzbGF0ZWdyZXlcIik7XG4gICAgc25ha2VHcmFkaWVudC5hZGRDb2xvclN0b3AoMC41LCBcIiMzMzMzMzNcIik7XG4gICAgc25ha2VHcmFkaWVudC5hZGRDb2xvclN0b3AoMSwgXCJibGFja1wiKTtcblxuICAgIHRoaXMuZ3JhZGllbnRzID0geyBhcHBsZUdyYWRpZW50LCB0cmFwR3JhZGllbnQsIHNuYWtlR3JhZGllbnQgfTtcbiAgfVxuXG4gIGRyYXdTcHJpdGUoc3ByaXRlOiBTcHJpdGUsIGdyYWRpZW50U3R5bGU/OiBzdHJpbmcpIHtcbiAgICBzcHJpdGUuYmxvY2tzLmZvckVhY2goKGJsb2NrKSA9PiB7XG4gICAgICB0aGlzLmRyYXdCbG9jayhibG9jaywgZ3JhZGllbnRTdHlsZSk7XG4gICAgfSk7XG4gIH1cblxuICBkcmF3QmxvY2soYmxvY2s6IEJsb2NrLCBncmFkaWVudFN0eWxlPzogc3RyaW5nKSB7XG4gICAgaWYgKGdyYWRpZW50U3R5bGUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLmdyYWRpZW50c1tncmFkaWVudFN0eWxlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IGJsb2NrLmNvbG9yO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoXG4gICAgICBibG9jay5wb3NpdGlvbi54ICogdGhpcy5jZWxsU2l6ZSxcbiAgICAgIGJsb2NrLnBvc2l0aW9uLnkgKiB0aGlzLmNlbGxTaXplLFxuICAgICAgdGhpcy5jZWxsU2l6ZSxcbiAgICAgIHRoaXMuY2VsbFNpemUsXG4gICAgKTtcbiAgfVxuXG4gIGRyYXdHcmlkKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IFwiI0NDQ0NDQ1wiO1xuICAgIGZvciAobGV0IHggPSAwOyB4IDw9IHdpZHRoOyB4ICs9IHRoaXMuY2VsbFNpemUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8oeCwgeSk7XG4gICAgICB0aGlzLmNvbnRleHQubGluZVRvKHgsIGhlaWdodCk7XG4gICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPD0gaGVpZ2h0OyB5ICs9IHRoaXMuY2VsbFNpemUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8oeCwgeSk7XG4gICAgICB0aGlzLmNvbnRleHQubGluZVRvKHdpZHRoLCB5KTtcbiAgICAgIHRoaXMuY29udGV4dC5zdHJva2UoKTtcbiAgICB9XG4gIH1cblxuICBzaG93R2FtZU1lc3NhZ2UoKSB7XG4gICAgc3dpdGNoICh0aGlzLmdhbWVTdGF0dXMpIHtcbiAgICAgIGNhc2UgXCJsb3N0XCI6XG4gICAgICAgIHRoaXMuZHJhd1RleHRBdE1pZGRsZShcIlRyeSBhZ2FpblwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwid29uXCI6XG4gICAgICAgIHRoaXMuZHJhd1RleHRBdE1pZGRsZShcIllvdSB3b24hXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBkcmF3RlBTKHRpbWVTaW5jZVN0YXJ0OiBudW1iZXIpIHtcbiAgICBjb25zdCBjdXJyZW50RnBzID1cbiAgICAgIE1hdGgucm91bmQoKDEwMDAgLyAodGltZVNpbmNlU3RhcnQgLyArK3RoaXMuZnJhbWVDb3VudCkpICogMTAwKSAvIDEwMDtcbiAgICB0aGlzLmRyYXdUZXh0QXRCb3R0b21SaWdodChgRlBTOiAke2N1cnJlbnRGcHMudG9TdHJpbmcoKX1gKTtcbiAgfVxuXG4gIGRyYXdTdHJva2VUZXh0KHRleHQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIndoaXRlXCI7XG4gICAgY29uc3QgcHJldkxpbmVXaWR0aCA9IHRoaXMuY29udGV4dC5saW5lV2lkdGg7XG4gICAgdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IDQ7XG4gICAgdGhpcy5jb250ZXh0LnN0cm9rZVRleHQodGV4dCwgeCwgeSk7XG4gICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcbiAgICB0aGlzLmNvbnRleHQuZmlsbFRleHQodGV4dCwgeCwgeSk7XG4gICAgdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IHByZXZMaW5lV2lkdGg7XG4gIH1cblxuICBkcmF3VGV4dEF0TWlkZGxlKHRleHQ6IHN0cmluZykge1xuICAgIHRoaXMuY29udGV4dC5mb250ID0gXCIzNnB4IHNhbnMtc2VyaWZcIjtcblxuICAgIGNvbnN0IHRleHRNZXRyaWNzID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpO1xuICAgIHRoaXMuZHJhd1N0cm9rZVRleHQoXG4gICAgICB0ZXh0LFxuICAgICAgdGhpcy53aWR0aCAvIDIgLSB0ZXh0TWV0cmljcy53aWR0aCAvIDIsXG4gICAgICB0aGlzLmhlaWdodCAvIDIgLSB0ZXh0TWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCAvIDIsXG4gICAgKTtcbiAgfVxuXG4gIGRyYXdUZXh0QXRCb3R0b21SaWdodCh0ZXh0OiBzdHJpbmcpIHtcbiAgICB0aGlzLmNvbnRleHQuZm9udCA9IFwiMTJweCBzYW5zLXNlcmlmXCI7XG5cbiAgICBjb25zdCB0ZXh0TWV0cmljcyA9IHRoaXMuY29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KTtcbiAgICB0aGlzLmRyYXdUZXh0KHRleHQsIHRoaXMud2lkdGggLSB0ZXh0TWV0cmljcy53aWR0aCAtIDEsIHRoaXMuaGVpZ2h0IC0gMik7XG4gIH1cblxuICBkcmF3VGV4dCh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcblxuICAgIHRoaXMuY29udGV4dC5maWxsVGV4dCh0ZXh0LCB4LCB5LCB0aGlzLndpZHRoKTtcbiAgfVxuXG4gIHNldFNuYWtlUG9zaXRpb24oKSB7XG4gICAgY29uc3QgW21pZGRsZVgsIG1pZGRsZVldID0gW1xuICAgICAgTWF0aC5mbG9vcih0aGlzLmNlbGxzWCAvIDIpLFxuICAgICAgTWF0aC5mbG9vcih0aGlzLmNlbGxzWSAvIDIpLFxuICAgIF07XG4gICAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKHsgeDogbWlkZGxlWCwgeTogbWlkZGxlWSB9LCA2KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UmFuZG9tWFkoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuY2VsbHNYKSxcbiAgICAgIHk6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuY2VsbHNZKSxcbiAgICB9O1xuICB9XG5cbiAgc2V0QXBwbGVQb3NpdGlvbnMoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bUFwcGxlczsgaSsrKSB7XG4gICAgICBsZXQgYXBwbGU6IEFwcGxlO1xuICAgICAgd2hpbGUgKCFhcHBsZSB8fCBhcHBsZS5kZXRlY3RDb2xsaXNpb25XaXRoU3ByaXRlKHRoaXMucGxheWVyKSkge1xuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuZ2V0UmFuZG9tWFkoKTtcbiAgICAgICAgYXBwbGUgPSBuZXcgQXBwbGUoeyB4LCB5IH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5hcHBsZXMucHVzaChhcHBsZSk7XG4gICAgfVxuICB9XG5cbiAgc2V0VHJhcFBvc2l0aW9ucygpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVHJhcHM7IGkrKykge1xuICAgICAgbGV0IHRyYXA6IFRyYXA7XG4gICAgICB3aGlsZSAoXG4gICAgICAgICF0cmFwIHx8XG4gICAgICAgIHRyYXAuZGV0ZWN0Q29sbGlzaW9uV2l0aFNwcml0ZSh0aGlzLnBsYXllcikgfHxcbiAgICAgICAgdGhpcy5hcHBsZXMuc29tZSgoYXBwbGUpID0+IGFwcGxlLmRldGVjdENvbGxpc2lvbldpdGhTcHJpdGUodHJhcCkpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmdldFJhbmRvbVhZKCk7XG4gICAgICAgIHRyYXAgPSBuZXcgVHJhcCh7IHgsIHkgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnRyYXBzLnB1c2godHJhcCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWU7XG4iLCJpbXBvcnQgeyBCbG9jaywgUG9zaXRpb24gfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5jbGFzcyBTcHJpdGUge1xuICBkZWZhdWx0Q29sb3IgPSBcImJsYWNrXCJcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgYmxvY2tzOiBCbG9ja1tdID0gW11cbiAgKSB7fVxuXG4gIGdldCBjb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29sb3JcbiAgfVxuXG4gIGJ1aWxkQmxvY2soXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICBjb2xvcjogc3RyaW5nID0gdGhpcy5jb2xvclxuICApOiBCbG9jayB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvc2l0aW9uOiB7IHgsIHkgfSxcbiAgICAgIGNvbG9yOiBjb2xvclxuICAgIH07XG4gIH1cblxuICBkZXRlY3RDb2xsaXNpb25BdFBvc2l0aW9uKHBvc2l0aW9uOiBQb3NpdGlvbik6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ibG9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5ibG9ja3NbaV0ucG9zaXRpb24ueCA9PSBwb3NpdGlvbi54ICYmXG4gICAgICAgIHRoaXMuYmxvY2tzW2ldLnBvc2l0aW9uLnkgPT0gcG9zaXRpb24ueVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBkZXRlY3RDb2xsaXNpb25XaXRoU3ByaXRlKHNwcml0ZTogU3ByaXRlKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJsb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzcHJpdGUuYmxvY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmJsb2Nrc1tpXS5wb3NpdGlvbi54ID09IHNwcml0ZS5ibG9ja3Nbal0ucG9zaXRpb24ueCAmJlxuICAgICAgICAgIHRoaXMuYmxvY2tzW2ldLnBvc2l0aW9uLnkgPT0gc3ByaXRlLmJsb2Nrc1tqXS5wb3NpdGlvbi55XG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGRldGVjdENvbGxpc2lvbldpdGhCbG9jayhibG9jazogQmxvY2spOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuYmxvY2tzW2ldLnBvc2l0aW9uLnggPT0gYmxvY2sucG9zaXRpb24ueCAmJlxuICAgICAgICB0aGlzLmJsb2Nrc1tpXS5wb3NpdGlvbi55ID09IGJsb2NrLnBvc2l0aW9uLnlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTaW5ndWxhclNwcml0ZSBleHRlbmRzIFNwcml0ZSB7XG4gIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBQb3NpdGlvbikge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLmJsb2Nrcy5wdXNoKFxuICAgICAgdGhpcy5idWlsZEJsb2NrKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpXG4gICAgKTtcbiAgfVxuXG4gIGdldCBibG9jaygpIHtcbiAgICByZXR1cm4gdGhpcy5ibG9ja3NbMF07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3ByaXRlO1xuIiwiaW1wb3J0IEdhbWUgZnJvbSAnLi9HYW1lJ1xuXG5cbmNvbnN0IGdhbWUgPSBuZXcgR2FtZSgpXG5nYW1lLnJ1bkdhbWVMb29wKCkiLCJpbXBvcnQgeyBTaW5ndWxhclNwcml0ZSB9IGZyb20gJy4uL1Nwcml0ZSdcblxuY2xhc3MgQXBwbGUgZXh0ZW5kcyBTaW5ndWxhclNwcml0ZSB7XG4gIGdldCBjb2xvcigpIHtcbiAgICByZXR1cm4gXCJyZWRcIlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcGxlIiwiaW1wb3J0IHsgQmxvY2ssIFBvc2l0aW9uIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuLi9TcHJpdGVcIjtcblxuY2xhc3MgUGxheWVyIGV4dGVuZHMgU3ByaXRlIHtcbiAgY29uc3RydWN0b3Ioc3RhcnRQb3NpdGlvbjogUG9zaXRpb24sIG51bUJsb2NrczogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUJsb2NrczsgaSsrKSB7XG4gICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IHtcbiAgICAgICAgeDogc3RhcnRQb3NpdGlvbi54ICsgaSxcbiAgICAgICAgeTogc3RhcnRQb3NpdGlvbi55ICsgaSxcbiAgICAgIH07XG4gICAgICB0aGlzLmJsb2Nrcy5wdXNoKFxuICAgICAgICB0aGlzLmJ1aWxkQmxvY2sobmV3UG9zaXRpb24ueCwgbmV3UG9zaXRpb24ueSwgdGhpcy5jb2xvciksXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGVhdChibG9jazogQmxvY2spIHtcbiAgICB0aGlzLmJsb2Nrcy5wdXNoKHtcbiAgICAgIC4uLmJsb2NrLFxuICAgICAgY29sb3I6IHRoaXMuY29sb3IsXG4gICAgfSk7XG4gIH1cblxuICBtb3ZlKHhPZmZzZXQ6IG51bWJlciwgeU9mZnNldDogbnVtYmVyKSB7XG4gICAgY29uc3QgbmV3UG9zaXRpb24gPSB7XG4gICAgICB4OiB0aGlzLmhlYWRCbG9jay5wb3NpdGlvbi54ICsgeE9mZnNldCxcbiAgICAgIHk6IHRoaXMuaGVhZEJsb2NrLnBvc2l0aW9uLnkgKyB5T2Zmc2V0LFxuICAgIH07XG4gICAgdGhpcy5ibG9ja3MgPSBbXG4gICAgICAuLi50aGlzLmJsb2Nrcy5zbGljZSgxKSxcbiAgICAgIHRoaXMuYnVpbGRCbG9jayhuZXdQb3NpdGlvbi54LCBuZXdQb3NpdGlvbi55LCB0aGlzLmNvbG9yKSxcbiAgICBdO1xuICB9XG5cbiAgbW92ZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5ibG9ja3MgPSBbLi4udGhpcy5ibG9ja3Muc2xpY2UoMSksIHRoaXMuYnVpbGRCbG9jayh4LCB5LCB0aGlzLmNvbG9yKV07XG4gIH1cblxuICBkZXRlY3RDb2xsaXNpb25XaXRoU2VsZihwb3NpdGlvbjogUG9zaXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5ibG9ja3Muc2xpY2UoMSkuc29tZSgoYmxvY2spID0+IHtcbiAgICAgIHJldHVybiBibG9jay5wb3NpdGlvbi54ID09IHBvc2l0aW9uLnggJiYgYmxvY2sucG9zaXRpb24ueSA9PSBwb3NpdGlvbi55O1xuICAgIH0pO1xuICB9XG5cbiAgcG9zaXRpb25XaXRoT2Zmc2V0KHhPZmZzZXQ6IG51bWJlciwgeU9mZnNldDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHRoaXMuaGVhZEJsb2NrLnBvc2l0aW9uLnggKyB4T2Zmc2V0LFxuICAgICAgeTogdGhpcy5oZWFkQmxvY2sucG9zaXRpb24ueSArIHlPZmZzZXQsXG4gICAgfTtcbiAgfVxuXG4gIGdldCBoZWFkQmxvY2soKTogQmxvY2sge1xuICAgIHJldHVybiB0aGlzLmJsb2Nrc1t0aGlzLmJsb2Nrcy5sZW5ndGggLSAxXTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7XG4iLCJpbXBvcnQgeyBTaW5ndWxhclNwcml0ZSB9IGZyb20gJy4uL1Nwcml0ZSdcblxuY2xhc3MgVHJhcCBleHRlbmRzIFNpbmd1bGFyU3ByaXRlIHtcbiAgZ2V0IGNvbG9yKCkge1xuICAgIHJldHVybiBcIiM2NjY2NjZcIlxuICB9IFxufVxuXG5leHBvcnQgZGVmYXVsdCBUcmFwIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=